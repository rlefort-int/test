node('jenkins-slave-docker') {
    stage('checking repo for new branch') {
         
        sh"git ls-remote --heads https://github.com/rlefort-int/test > branches_latest"
        
        sh '''      if ! cmp -s branches_list branches_latest; 
                        then 
                        echo "things changed"
                        mv branches_latest branches_list
			mkdir -p /home/jenkins-slave/workspace/test/vagrant_build
                        cd /home/jenkins-slave/workspace/test/vagrant_build
                        git clone -b vagrant --single-branch https://github.com/rlefort-int/test 
                        cd /home/jenkins-slave/workspace/test/vagrant_build/test/
                        chmod +x /home/jenkins-slave/workspace/test/vagrant_build/test/callvgrnt.sh
                        /home/jenkins-slave/workspace/test/vagrant_build/test/callvgrnt.sh
                    fi'''

 	sh '''
	
	'''
    }
}
